# SDD - Модули игры
**Класс Game**

·       Описание: класс Game реализован в модуле main.py и отвечает за управление основным игровым процессом. В его функционал входят запуск игрового цикла, обработка пользовательских событий и взаимодействие с другими компонентами системы.

·       Методы:

* * main\_menu() — отображает главное меню с кнопками "Начать игру" и "Выход".
  * game\_loop() — реализует основной игровой цикл, обеспечивая обработку ходов, проверку игровых состояний (шах и мат) и обновление интерфейса.

 

**Класс Board**

·       Описание: класс Board, определённый в модуле Board.py, управляет состоянием шахматной доски, размещением фигур и реализацией правил игры.

·       Атрибуты:

* * width, height — размеры доски.
  * tile\_width, tile\_height — размеры одной клетки.
  * squares — список объектов Square, представляющих клетки доски.
  * turn — текущий ход (белые или чёрные).
  * selected\_piece — фигура, выбранная для выполнения хода.

·       Методы:

* * setup\_board() — размещает шахматные фигуры на доске в начальной позиции.
  * handle\_click(mx, my) — обрабатывает действия пользователя, такие как выбор фигуры или выполнение хода.
  * is\_in\_check(color) — проверяет, находится ли король указанного цвета под шахом.
  * is\_in\_checkmate(color) — определяет, поставлен ли мат королю.
  * draw(display) — отвечает за отрисовку шахматной доски и фигур на экране.

 

**Класс Square**

·       Описание: класс Square, расположенный в модуле Square.py, представляет клетку шахматной доски. Он хранит информацию о координатах, цвете и фигуре, находящейся на клетке.

·       Атрибуты:

* * x, y — координаты клетки.
  * color — цвет клетки (светлый или тёмный).
  * occupying\_piece — фигура, находящаяся на клетке (если есть).
  * highlight — логический флаг, указывающий на необходимость подсветки клетки.

·       Методы:

* * get\_coord() — возвращает шахматные координаты клетки (например, e4).
  * draw(display) — отрисовывает клетку на экране, включая подсветку и фигуру.

 

**Класс Piece и её наследники**

·       Описание: класс Piece, расположенный в модуле Piece.py, является базовым для всех шахматных фигур. Его функционал включает управление позицией, правилами движения и взаимодействием с другими фигурами. Наследники класса (Pawn, Rook, Knight, Bishop, Queen, King) реализуют индивидуальные правила движения.

 

·       Атрибуты:

* * pos — текущая позиция фигуры в виде координат (x, y).
  * color — цвет фигуры (white или black).
  * has\_moved — логический флаг, указывающий, перемещалась ли фигура ранее.

·       Методы:

* * move(board, square) — перемещает фигуру на указанную клетку, если это допустимо.
  * get\_moves(board) — возвращает список доступных для перемещения клеток.
  * attacking\_squares(board) — определяет клетки, находящиеся под атакой фигуры.

·       Наследники:

* * Pawn (пешка): движется вперёд, но бьёт по диагонали. При достижении последней линии превращается в выбранную фигуру.
  * Rook (ладья): перемещается по горизонтали и вертикали.
  * Knight (конь): перепрыгивает через другие фигуры, двигаясь буквой "Г".
  * Bishop (слон): перемещается по диагонали на любое количество клеток.
  * Queen (ферзь): объединяет ходы ладьи и слона.
  * King (король): движется на одну клетку в любом направлении. Может выполнять рокировку.

**Связанные темы:**
- [[20241209194546]] SDD - Архитектура программы
- [[20241209193114]] GDD - Основная механика

**Теги:**
#SDD #modules

